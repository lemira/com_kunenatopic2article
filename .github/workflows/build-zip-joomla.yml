name: Build Joomla Package # –°—Ç—Ä–æ–∫–∞ 1 (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ –ª—É—á—à–µ –æ—Å—Ç–∞–≤–∏—Ç—å)
on: # –°—Ç—Ä–æ–∫–∞ 2 (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
  workflow_dispatch:
  push:
    branches: [ interface ]

jobs: # –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          ref: interface

      - name: Set timestamp (Berlin time)
        run: echo "TIMESTAMP=$(TZ=Europe/Berlin date +'%y%m%d-%H%M')" >> $GITHUB_ENV

      - name: Build clean Joomla package ZIP üöÄ
        run: |
          ARCHIVE_NAME="com_kunenatopic2article_${{ env.TIMESTAMP }}.zip"
          # –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –∏ –ø–∞–ø–æ–∫ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –≤ –∫–æ—Ä–Ω–µ ZIP-–∞—Ä—Ö–∏–≤–∞
          FILES="admin media kunenatopic2article.xml"
          
          # -r –¥–ª—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è –ø–∞–ø–æ–∫
          zip -r $ARCHIVE_NAME $FILES

      - name: Upload artifact
        uses: actions/upload-artifact@v4
        with:
          name: com_kunenatopic2article_${{ env.TIMESTAMP }}
          path: com_kunenatopic2article_${{ env.TIMESTAMP }}.zip
